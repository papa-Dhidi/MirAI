{% extends "layout/app_layout.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="space-y-12">
    <!-- Personalized Hero Section -->
    <section class="p-10 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg">
        <h1 class="text-4xl md:text-5xl font-bold">Welcome back, {{ user.username }}!</h1>
        <p class="text-lg md:text-xl text-blue-100 mt-2">Ready for a movie night? Let's find something amazing.</p>
        <div class="mt-6">
            <a href="{% url 'chat:page' %}" class="btn btn-neutral btn-lg">
                Ask MirAI for Recommendations
                <svg xmlns="http://www.w3.org/2000/svg" class="ml-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
            </a>
        </div>
    </section>

    <!-- Trending Movies Carousel -->
    <div>
        <div class="flex justify-between items-baseline mb-4">
            <h2 class="text-2xl font-semibold text-white">Trending This Week</h2>
            <a href="{% url 'movies:trending' %}" class="text-sm text-indigo-400 hover:underline">View All</a>
        </div>
        
        {% if trending_movies %}
        <div class="carousel carousel-center w-full space-x-4 p-4 bg-slate-800/30 rounded-box">
            {% for movie in trending_movies %}
                <div class="carousel-item w-52 md:w-56">
                    {% include "components/movie_card.html" with movie=movie %}
                </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="bg-slate-800/30 rounded-box h-80 flex items-center justify-center">
            <p class="text-slate-500">Could not load trending movies.</p>
        </div>
        {% endif %}
    </div>

     <!-- AI Recommendations -->
    <div>
        <h2 class="text-2xl font-semibold text-white mb-4">Picks For You</h2>
        {% if ai_recommendations %}
        <div class="carousel carousel-center w-full space-x-4 p-4 bg-slate-800/30 rounded-box">
            {% for movie in ai_recommendations %}
                <div class="carousel-item w-52 md:w-56">
                    {% include "components/movie_card.html" with movie=movie %}
                </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="bg-slate-800/30 rounded-box h-80 flex items-center justify-center">
            <p class="text-slate-500">Add movies to your watchlist to get personalized recommendations!</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}